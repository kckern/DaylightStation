.rpm-device-avatar {
  --rpm-avatar-size: 64px;
  --rpm-zone-color: #666;
  --rpm-spin-duration: 0s;

  position: relative;
  width: var(--rpm-avatar-size);
  height: var(--rpm-avatar-size);

  .rpm-gauge {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .gauge-arc {
    stroke-width: 4;
    stroke-linecap: round;
    fill: none;
    transition: stroke 0.3s ease;
  }

  .gauge-arc-track {
    stroke: rgba(255, 255, 255, 0.15);
  }

  .gauge-arc-progress {
    transition: stroke-dashoffset 0.3s ease, stroke 0.3s ease;
  }

  .bottom-arc {
    stroke-width: 4;

    &.spinning {
      stroke-dasharray: 8 12;
      animation: rpm-spin var(--rpm-spin-duration) linear infinite;
      transform-origin: center;
    }

    &.pulsing {
      stroke-dasharray: none;
      transition: opacity 0.2s ease;
    }
  }

  &.is-pulsing .bottom-arc.pulsing {
    opacity: 1;
    stroke-width: 6;
  }

  &.is-idle {
    .gauge-arc-progress {
      opacity: 0.5;
    }
    .bottom-arc {
      opacity: 0.3;
    }
  }

  .avatar-core {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 70%;
    height: 70%;
    border-radius: 50%;
    overflow: hidden;
    background: #222;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }
}

@keyframes rpm-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
