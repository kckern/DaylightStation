# Plex Metadata Admin ‚Äî Requirements Document

## 1. Overview

**PlexMetadataAdmin** is a Node.js application that provides bi-directional metadata synchronization between a Plex Media Server and a local NFO (JSON-based) file system. It manages metadata for TV shows, audio/music libraries, audiobooks, and general media‚Äîreading from Plex via its REST API, persisting data locally as `nfo.json` files and poster images, and pushing local edits back to Plex.

The system is composed of two main layers:

| Layer | Files | Role |
|-------|-------|------|
| **Plex API Client** | `lib/plex.mjs` | Object-oriented `Plex` class for data retrieval, media URL generation, and playback queue building |
| **Sync Engine + Helpers** | `proj/lib.js`, `proj/http.js` | Procedural library functions for bi-directional sync, tag editing, NFO persistence, image downloads, and ID3-to-Plex reconciliation |

---

## 2. Configuration & Authentication

### REQ-CFG-01: Environment-Based Configuration
- The system **shall** read all connection parameters from a `.env` file: `PLEX_HOST`, `PLEX_PORT`, `PLEX_TOKEN`, `PLEX_PROT` (protocol, defaulting to `http`).
- The `Plex` class **shall** construct a `baseUrl` from these values, omitting the port segment when `PLEX_PORT` is not set.

### REQ-CFG-02: Token-Based Authentication
- Every HTTP request to the Plex server **shall** include the `X-Plex-Token` query parameter.
- The system **shall** throw an error at startup if `PLEX_TOKEN` is not present.

### REQ-CFG-03: Path Mapping
- The `processPath()` function **shall** translate Plex server-side media paths (e.g., `/data/media/audio/audiobooks`) to local mount-point paths (e.g., `/Volumes/sambashare/Archive1/Audiobooks/Authors`).
- The mapping **shall** support 18+ distinct path prefixes covering music, audiobooks, children's content, fitness, speech, education, scripture, ambient, industrial, SFX, movies, TV, lectures, cooking, documentaries, and documentary series.

---

## 3. Plex API Client (`lib/plex.mjs` ‚Äî `Plex` Class)

### 3.1 Core HTTP Methods

#### REQ-API-01: Generic GET Fetch
- `fetch(paramString)` **shall** perform an authenticated GET request to `{baseUrl}/{paramString}`.
- If the URL contains no `?`, it **shall** append `?1=1` before adding the token.
- On failure, it **shall** log the error and URL, and return `null`.

#### REQ-API-02: Generic PUT Update
- `update(paramString, data)` **shall** perform an authenticated PUT request.
- Data parameters **shall** be URL-encoded and appended to the query string.
- On failure, it **shall** log the error and return `null`.

### 3.2 Metadata Loading

#### REQ-API-03: Load Item Metadata
- `loadMeta(plex, type)` **shall** fetch `library/metadata/{plex}{type}` and return an array of metadata objects.
- Each item **shall** be augmented with a `plex` property (alias of `ratingKey`) and a `labels` array (lowercase label tags).

#### REQ-API-04: Load Children with Context
- `loadChildrenFromKey(plex, playable, shuffle)` **shall** return an object containing `{ plex, type, title, image, list }`.
- If the item's labels include `"shuffle"`, the shuffle flag **shall** be set to `true` automatically.

#### REQ-API-05: Polymorphic List Loading
- `loadListFromKey(plex, playable, shuffle)` **shall** dispatch to the correct loader based on item type:
  - `playlist` ‚Üí `loadListFromPlaylist`
  - `collection` ‚Üí `loadListFromCollection`
  - `season` ‚Üí `loadListFromSeason`
  - `show` ‚Üí `loadListFromShow`
  - `artist` ‚Üí `loadListFromArtist`
  - `album` ‚Üí `loadListFromAlbum`
  - (fallback) ‚Üí `loadListKeys`
- When `shuffle` is `true`, the resulting list **shall** be randomly reordered.

#### REQ-API-06: Collection Expansion
- `loadListFromCollection(plex)` **shall** fetch collection items via `library/collections/{plex}/items`.
- For items of type `show`, `artist`, or `album`, it **shall** recursively expand to their children.
- The final list **shall** be flattened to a single-level array.

#### REQ-API-07: Show/Artist Depth Control
- `loadListFromShow(plex, playable)` and `loadListFromArtist(plex, playable)`:
  - When `playable=false` ‚Üí load `/children` (seasons / albums).
  - When `playable=true` ‚Üí load `/grandchildren` (episodes / tracks).

#### REQ-API-08: Image URL Resolution
- `loadImgFromKey(plex)` **shall** return an array of three thumbnail URLs: `[thumb, parentThumb, grandparentThumb]`.
- `thumbUrl(paramString)` **shall** prepend `/plex_proxy` to the thumbnail path for proxy-based access.
- `artUrl(item, id, type)` **shall** construct a fully authenticated art URL for poster/background retrieval.

### 3.3 Media URL Generation

#### REQ-API-09: Media URL for Playback
- `loadmedia_url(itemData, attempt)` **shall** generate a streamable URL for a given item.
- If the item is not directly playable (`episode`, `movie`, `track`), it **shall** recursively resolve down to a playable child.
- **Audio**: the URL **shall** be `{proxy}/{Media.Part.key}?X-Plex-Token={token}`.
- **Video**: the URL **shall** be a DASH transcode URL with parameters for `protocol`, `X-Plex-Client-Identifier` (session), `maxVideoBitrate` (5000), and `X-Plex-Platform`.
- Video URL generation **shall** validate availability via a GET request and retry up to 10 times on failure.

#### REQ-API-10: Media Type Determination
- `determinemedia_type(type)` **shall** classify types:
  - `movie`, `episode`, `clip`, `short`, `trailer`, `season`, `show` ‚Üí `dash_video`
  - `track`, `album`, `artist` ‚Üí `audio`
  - All others ‚Üí passthrough.

### 3.4 Playable Object Construction

#### REQ-API-11: Build Playable Object
- `buildPlayableObject(itemData, parentKey, parentType, percent, seconds)` **shall** produce a normalized playable item containing:
  - `listkey`, `listType`, `key`, `type`, `title`, `summary`, `tagline`, `studio`, `year`
  - Context-specific fields: `artist`, `albumArtist`, `album` (for tracks); `show`, `season` (for episodes)
  - `media_type`, `media_url`, `image`, `percent`, `seconds`
- Null/empty/undefined fields **shall** be pruned from the result.

#### REQ-API-12: Single Playable Item
- `loadPlayableItemFromKey(key, shuffle)` **shall** select one item from the list (via `selectKeyToPlay`) and return a fully constructed playable object.

#### REQ-API-13: Playable Queue
- `loadPlayableQueueFromKey(key, shuffle)` **shall** iterate all list items and return an array of playable objects.

### 3.5 Legacy Single-Item Loaders

#### REQ-API-14: Episode Loader
- `loadEpisode(key)` **shall** return episode metadata with `image` set to `parentThumb` (season poster).

#### REQ-API-15: Movie Loader
- `loadMovie(key)` **shall** return movie metadata with `image` set to the movie's own `thumb`.

#### REQ-API-16: Audio Track Loader
- `loadAudioTrack(key)` **shall** return track metadata with `image` (parent thumb), `path` (media key), and `id` (part ID).

#### REQ-API-17: Show Loader (Full Detail)
- `loadShow(key)` **shall** return a comprehensive show object including:
  - `ratingKey`, `studio`, `title`, `titleSort`, `summary`, `year`, `originallyAvailableAt`
  - `path` (from Location), `genre`, `director`, `cast`, `collection` (all flattened to comma-separated strings)
  - `art` (extracted numeric ID from thumb path)
  - `seasons[]` with `ratingKey`, `index`, `title`, `summary`, `thumb`

#### REQ-API-18: Artist Loader
- `loadArtist(metadataId)` **shall** return `{ meta, tracks }` with tracks sorted by `ratingCount:desc`, limited to 3000.
- `loadArtistAlbums(metadataId)` **shall** return album directories sorted by `ratingCount:desc`.

#### REQ-API-19: Track Normalization
- `loadTrack(track)` **shall** normalize a track object to a flat structure with `id`, `artist`, `track_artist`, `artist_id`, `album`, `album_id`, `title`, `track_no`, `disc_no`, `summary`, `media_id`, `media_part_id`, `url`, `duration`, `path`.

### 3.6 Utility Methods

#### REQ-API-20: Tag Flattening
- `flattenTags(items, leaf)` **shall** convert an array of tag objects to a comma-separated string using the specified leaf key (default: `"tag"`).

#### REQ-API-21: Object Filtering
- `pruneArray(arr, blacklist)` **shall** delete blacklisted keys from an object.
- `pickArray(array, whitelist)` **shall** return a new object containing only whitelisted keys, with special handling for `thumb` (extract numeric ID).

---

## 4. Sync Engine (`proj/lib.js`)

### 4.1 Library Dispatcher

#### REQ-SYNC-01: Library Type Detection
- `loadLibraryType(libraryID)` **shall** query `library/sections` and return the `type` field for the matching library.

#### REQ-SYNC-02: Unified Entry Point
- `syncLibrary(libraryID, filter)` **shall**:
  - Default `libraryID` to `5` if not provided.
  - Detect the library type and dispatch to:
    - `"show"` ‚Üí `syncTVShowLibary()`
    - `"artist"` ‚Üí `syncAudioLibrary()`
    - (movie support is stubbed but commented out)
  - Accept an optional `filter` (regex string) to limit which items are synced.

### 4.2 TV Show Sync

#### REQ-SYNC-03: Show-Level Processing
- `syncTVShowLibary(libraryID, filter)` **shall** iterate all shows in the library.
- For each show:
  1. Load show details via `loadPlexItem()`.
  2. Apply the regex filter against the show's file path (case-insensitive). Skip non-matching shows.
  3. Translate the Plex path to a local path via `processPath()`.

#### REQ-SYNC-04: Show NFO Merge Strategy
- If `nfo.json` exists in the show folder:
  - Load existing NFO data.
  - Extract and temporarily separate `seasons` data.
- Merge keys `["studio", "title", "titleSort", "summary", "year", "originallyAvailableAt", "genre", "director", "collection"]`, preferring NFO values over Plex when NFO has data (NFO wins).
- Filter out falsy values.
- Push the merged data back to Plex via `editPlexItem()`.

#### REQ-SYNC-05: Show Poster Download
- If `show.jpg` does not exist in the show folder, it **shall** be downloaded from the Plex poster URL.

#### REQ-SYNC-06: Season-Level Processing
- For each season:
  1. Determine the season's local file path from the first episode's media file path.
  2. Look up or initialize season data in the NFO seasons array by `index`.

#### REQ-SYNC-07: Program Data Override
- If `program.txt` exists in the season folder, it **shall** override season metadata:
  - Line 1 ‚Üí `title`
  - Line 2 ‚Üí `summary`
  - Line 3 ‚Üí teacher name (appended to summary)
  - Line 4 ‚Üí teacher bio (appended to summary with format: `"{teacher}: {bio}"`)
  - Exception: if `"wondrium"` appears in the program data (case-insensitive), teacher and bio are cleared.

#### REQ-SYNC-08: Bi-Directional Season Sync
- **Plex ‚Üí NFO (Download)**:
  - If Plex has a poster but local `season{index}.jpg` does not exist ‚Üí download the poster.
  - If Plex has a custom title (not `"Season N"`) but NFO does not ‚Üí save title to NFO.
  - If Plex has a summary but NFO does not ‚Üí save summary to NFO.
- **NFO ‚Üí Plex (Upload)**:
  - If NFO has a title but Plex title is generic (`"Season N"`) ‚Üí push title to Plex.
  - If NFO has a summary but Plex does not ‚Üí push summary to Plex.

#### REQ-SYNC-09: NFO Persistence
- After processing all seasons, the complete show NFO (with seasons array) **shall** be written to `{showFolder}/nfo.json` as pretty-printed JSON (4-space indent).
- If the path does not exist, it **shall** log a warning and skip writing.
- File write errors **shall** be caught and logged with a red indicator.

#### REQ-SYNC-10: Process Exit
- `syncTVShowLibary()` **shall** call `process.exit()` upon completion.

### 4.3 Audio Library Sync

#### REQ-SYNC-11: Audio Library Processing
- `syncAudioLibrary(libraryID, filter)` **shall**:
  1. Log the library title and ID.
  2. Iterate all artists, applying the regex filter against artist name.
  3. For each artist, iterate albums (in reverse order).
  4. For each album, load all tracks and process each via `syncSingleAudioItem()`.

#### REQ-SYNC-12: ID3 ‚Üî Plex Track Reconciliation
- `syncSingleAudioItem(libraryID, trackData)` **shall**:
  1. Verify the track file exists on the local filesystem.
  2. Read ID3 tags from the file using `NodeID3`.
  3. Compare four tag fields between ID3 and Plex:
     - `title` ‚Üî `title`
     - `album` ‚Üî `parentTitle`
     - `artist` ‚Üî `originalTitle`
     - `performerInfo` ‚Üî `grandparentTitle`
  4. Exclude the `originalTitle` diff when the ID3 artist equals performerInfo and Plex originalTitle is blank.
  5. If differences exist, build an update payload using Plex-specific write keys.

#### REQ-SYNC-13: Album/Artist ID Resolution
- When the album title differs, the system **shall** resolve the correct album ID via `getItemIdFromString()` (autocomplete search, type 9).
- When the artist title differs, the system **shall** resolve the correct artist ID via `getItemIdFromString()` (autocomplete search, type 8).
- Resolved IDs **shall** replace title-based writes with `album.id.value` / `artist.id.value` references.

### 4.4 Audiobook Sync

#### REQ-SYNC-14: Author Books Loader
- `loadAuthorBooks(authorID)` **shall**:
  1. Fetch all children (books) of an author.
  2. For each book, fetch its tracks and extract file paths.
  3. Verify all tracks reside in the same directory; return `null` if they don't.
  4. Assign the common directory as the book's `path`.

#### REQ-SYNC-15: Book Sync
- `syncBook(nfoData, plexData, direction)` **shall**:
  - Compute a normalized date from `nfoData.goodreads.year`, `nfoData.year`, or `nfoData.google.publishedDate`.
  - On `"up"` or `"sync"` direction: push summary, studio (with fallbacks to Goodreads/Google publisher), date, year, genres, styles (from Topics), moods (from Styles), collections to Plex.
  - Always remove audiobook-related genre tags (`Audiobook`, `Audiobooks`, `Audio-book`, `Audio-books`).
  - Lock the summary field (`summary.locked: 1`).
  - On `"down"` or `"sync"` direction: write NFO to disk and verify integrity by re-reading.

#### REQ-SYNC-16: Author Sync
- `syncAuthor(nfoData, plexData, direction)` **shall**:
  - Initialize all tag arrays (Collection, Country, Genre, Mood, Style, Similar) with empty defaults.
  - Compare 8 fields between NFO and Plex: Collection, Country, Genre, Mood, Style, Similar, summary, title.
  - Skip if all fields match and no audiobook genre tags are present.
  - **Merge strategy**: union (deduplicate) tag arrays from both NFO and Plex sources.
  - On upload: push merged tags, title, summary (locked) to Plex; remove audiobook genre tags.
  - On download: filter audiobook genres and write NFO to disk with integrity verification.
  - Special skip: authors starting with "A" that only differ on Collection are skipped ("needs a redo").

### 4.5 Collection Management

#### REQ-SYNC-17: Upsert Artist Collection
- `upsertArtistCollection(plex_id, src, dst, librarySectionID)` **shall**:
  - Push a `collection[0].tag.tag` (add) and `collection[].tag.tag-` (remove) to Plex.
  - Update the local NFO file to reflect the collection rename.

#### REQ-SYNC-18: Delete Empty Collections
- `deleteEmptyCollections(librarySectionID, min, max)` **shall**:
  - Load all collections from the library.
  - Delete any collection whose `childCount` falls below `min` (default 1) or exceeds `max` (default 1,000,000).

---

## 5. Metadata Edit Engine

### 5.1 Parameter Preparation

#### REQ-EDIT-01: Tag Parameter Normalization
- `prepareParams(params)` **shall** convert human-friendly tag arrays into Plex API format:
  - `genre` / `Genre` / `genres` / `Genres` ‚Üí `genre[i].tag.tag`
  - `style` / `Style` / `styles` / `Styles` ‚Üí `style[i].tag.tag`
  - `country` / `Country` ‚Üí `country[i].tag.tag`
  - `mood` / `Mood` ‚Üí `mood[i].tag.tag`
  - `collection` / `Collection` ‚Üí `collection[i].tag.tag`
  - `similar` / `Similar` ‚Üí `similar[i].tag.tag`
- String values **shall** be split on commas and trimmed.
- A `remove` parameter **shall** generate `{key}[].tag.tag-` entries for tag removal.

### 5.2 Item Editing

#### REQ-EDIT-02: Edit Plex Item
- `editPlexItem(plex_id, params, message)` **shall**:
  1. Load the current item metadata.
  2. Map the item's string type to a numeric type ID (`album:9, artist:8, movie:1, show:2, season:3, episode:4, track:10`).
  3. For albums (type 9) with a title change: resolve the parent artist ID.
  4. Merge current editable keys with new params.
  5. Convert value fields to `.value` suffixed keys for Plex PUT format.
  6. Extract year from `originallyAvailableAt` when present.
  7. For tracks (type 10): strip `year.value` and `originallyAvailableAt.value`.
  8. Execute PUT request; exit process on failure.

#### REQ-EDIT-03: Edit Plex Track (Simplified)
- `editPlexTrack(plex_id, params, message)` **shall** directly PUT track data with `type:10` without the full merge logic.

#### REQ-EDIT-04: Autocomplete Search
- `getItemIdFromString(libraryID, query, queryType)` **shall** search via `library/sections/{id}/autocomplete` and return the first matching `ratingKey`.

---

## 6. Data Loading Functions

### REQ-DATA-01: Compound Key Normalization
- `loadPlexItem(plex_id)` **shall** flatten Plex's nested tag structures (Genre, Style, Country, Director, Location, Format, Label, Mood, Collection, Similar) into simple arrays using the appropriate leaf key.
- Empty tag arrays **shall** be deleted from the result.

### REQ-DATA-02: Library Enumeration
- The system **shall** provide typed loaders for all Plex library item types:

  | Function | Type Code | Returns |
  |----------|-----------|---------|
  | `loadArtistsFromLibrary` | 8 | Artists |
  | `loadAlbumsFromLibrary` | 9 | Albums |
  | `loadTracksFromLibrary` | 10 | Tracks |
  | `loadMoviesFromLibrary` | 1 | Movies |
  | `loadShowsFromLibrary` | 2 | Shows |
  | `loadSeasonsFromLibrary` | 3 | Seasons |
  | `loadEpisodesFromLibrary` | 4 | Episodes |
  | `loadMovieCollectionsFromLibrary` | 18 | Movie Collections |
  | `loadPlaylistsFromLibrary` | 15 | Playlists |
  | `loadPhotoAlbumsFromLibrary` | 7 | Photo Albums |
  | `loadPhotoItemsFromLibrary` | 12 | Photo Items |

### REQ-DATA-03: Hierarchical Loading
- `loadSeasonsFromShow(showID)` ‚Üí loads children of a show.
- `loadAlbumsFromArtist(artistID)` ‚Üí loads children of an artist.
- `loadTracksFromAlbum(albumID)` ‚Üí loads children of an album, extracting `path` from `Media[0].Part[0].file`.
- `loadArtistTracksFromLibrary(libraryID, artistName)` ‚Üí filters tracks by artist title within a library.

### REQ-DATA-04: Collection & Genre Enumeration
- `loadCollectionsFromLibrary(libraryID)` ‚Üí returns all collections.
- `loadGenresFromLibrary(libraryID)` ‚Üí returns all genre directories.

---

## 7. HTTP Transport (`proj/http.js`)

### REQ-HTTP-01: Authenticated Requests
- `plexFetch(param_string)` ‚Üí authenticated GET, exits process on error.
- `plexPut(data, libraryID)` ‚Üí authenticated PUT to `library/sections/{library}/all` with URL-encoded parameters (spaces as `%20`).
- `plexDelete(param_string)` ‚Üí authenticated DELETE, exits process on error.
- `plexRefresh(plex_id)` ‚Üí PUT to `library/metadata/{id}/refresh`.
- `plexDeleteItem(plex_id)` ‚Üí DELETE `library/metadata/{id}`.

### REQ-HTTP-02: Image Operations
- `imgUrlFromKey(key)` ‚Üí resolves a metadata key to a thumbnail URL, checking multiple container types (Directory, Track, Video, Playlist); falls back to composite playlist image.
- `thumbUrl(param_string)` ‚Üí constructs an authenticated thumbnail URL.
- `downloadFile(url, dest, message)` ‚Üí downloads binary content via axios and writes to disk.

### REQ-HTTP-03: Path Translation
- `processPath(path, meta)` ‚Üí translates Plex server paths to local mount paths using a hardcoded mapping table.
- Folders starting with `_` trigger appending the item's title as a subfolder.
- Duplicate slashes **shall** be collapsed.

---

## 8. NFO File Format

### REQ-NFO-01: Show NFO Schema
```json
{
  "studio": "string",
  "title": "string",
  "titleSort": "string",
  "summary": "string",
  "year": "number",
  "originallyAvailableAt": "string (YYYY-MM-DD)",
  "genre": "string (comma-separated)",
  "director": "string (comma-separated)",
  "collection": "string (comma-separated)",
  "seasons": [
    {
      "index": "number",
      "title": "string",
      "summary": "string"
    }
  ]
}
```

### REQ-NFO-02: Author NFO Schema
```json
{
  "ratingKey": "string|null",
  "title": "string",
  "titleSort": "string",
  "summary": "string",
  "Collection": ["string"],
  "Country": ["string"],
  "Genre": ["string"],
  "Mood": ["string"],
  "Style": ["string"],
  "Similar": ["string"]
}
```

### REQ-NFO-03: Book NFO Schema
```json
{
  "title": "string",
  "summary": "string",
  "studio": "string",
  "year": "string",
  "Genres": ["string"],
  "Topics": ["string"],
  "Styles": ["string"],
  "Collection": ["string"],
  "goodreads": { "year": "string", "publisher": "string" },
  "google": { "publishedDate": "string", "publisher": "string" }
}
```

### REQ-NFO-04: Persistence Rules
- All NFO files **shall** be named `nfo.json`.
- JSON **shall** be pretty-printed with 4-space indentation.
- Write errors **shall** be caught, not thrown.
- Integrity verification (re-read and compare) **shall** be performed for author and book NFO writes.

---

## 9. Poster/Image File Conventions

| Context | Filename | Source |
|---------|----------|--------|
| Show poster | `{showFolder}/show.jpg` | Plex show thumb |
| Season poster | `{seasonFolder}/season{index}.jpg` | Plex season thumb |
| Artist poster | `{artistFolder}/artist-poster.jpg` | Plex artist thumb |
| Artist background | `{artistFolder}/artist-background.jpg` | Plex artist art |
| Album cover | `{albumFolder}/cover.jpg` | Plex album thumb |
| Album background | `{albumFolder}/background.jpg` | Plex album art |

---

## 10. Logging & Error Handling

### REQ-LOG-01: Console Progress Indicators
- Show sync: indented season processing with `[0/1]` NFO-presence indicator.
- Audio sync: hierarchical Artist ‚Üí Album ‚Üí Track logging with track counts.
- Emoji indicators:
  - `‚¨áÔ∏è` Download from Plex to local
  - `‚¨ÜÔ∏è` Upload from local to Plex
  - `üî¥` Error / mismatch / missing file
  - `üü¢` Successful update
  - `üîµ` Item is already correct (no-op)

### REQ-LOG-02: Error Behavior
- HTTP transport errors in `proj/http.js` **shall** call `process.exit(0)`.
- `Plex` class (`lib/plex.mjs`) **shall** return `null` on HTTP errors without exiting.
- `editPlexItem` failures **shall** call `process.exit()`.
- NFO write failures **shall** be caught and logged without exiting.

---

## 11. Known Limitations & Incomplete Features

| Area | Status | Notes |
|------|--------|-------|
| Movie library sync | Stubbed | `syncMovieLibary` is commented out in `syncLibrary()` |
| `syncAlbumArtist` | Incomplete | Contains only a `loadPlexItem` call and a `TODO` comment |
| Legacy artist sync in `syncLibrary` | Dead code | The `for (const key of keys)` loop is unreachable (preceded by `return`) |
| `loadPlexPosters` | Empty | Function body fetches data but does not return it |
| `loadItemsFromLibrary` | Type param unused | The `type` parameter is accepted but not passed to the API call |
| `plex.mjs` line 1 | Typo | `pimport` instead of `import` |
| `selectKeyToPlay` method | Referenced but undefined | Called in `loadPlayableItemFromKey` and `loadmedia_url` but not defined in the class |
| `search` function in `http.js` | Incomplete | Uses undefined `fetch` reference and has a comment placeholder |
